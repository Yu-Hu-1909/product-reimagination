<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendar</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo">
          <svg class="logo-icon" viewBox="0 0 24 24">
            <path
              d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"
            />
          </svg>
          <span class="logo-text">Calendar</span>
        </div>
      </div>

      <div class="header-center">
        <button class="btn-today" id="todayBtn">Today</button>
        <div class="nav-buttons">
          <button class="nav-btn" id="prevBtn">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
            </svg>
          </button>
          <button class="nav-btn" id="nextBtn">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
            </svg>
          </button>
        </div>
        <h2 class="current-month" id="currentMonth">January 2026</h2>
      </div>

      <div class="header-right">
        <div class="view-selector">
          <button class="view-btn active" data-view="month">Month</button>
          <button class="view-btn" data-view="week">Week</button>
          <button class="view-btn" data-view="day">Day</button>
        </div>
        <button class="settings-btn" id="settingsBtn" title="Settings">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path
              d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
            />
          </svg>
        </button>
        <button class="user-menu" id="userMenuBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path
              d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
            />
          </svg>
        </button>
        <div class="user-dropdown" id="userDropdown">
          <div class="user-info">
            <span id="usernameDisplay"></span>
          </div>
          <button class="logout-btn" id="logoutBtn">Sign Out</button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="main-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <button class="create-btn" id="createEventBtn">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
          </svg>
          Create
        </button>

        <!-- Mini Calendar -->
        <div class="mini-calendar">
          <div class="mini-calendar-header">
            <button class="mini-nav-btn" id="miniPrevBtn">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
              </svg>
            </button>
            <span class="mini-month" id="miniMonth">Jan 2026</span>
            <button class="mini-nav-btn" id="miniNextBtn">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
              </svg>
            </button>
          </div>
          <div class="mini-calendar-grid" id="miniCalendarGrid"></div>
        </div>

        <!-- My Calendars -->
        <div class="my-calendars">
          <h3>My calendars</h3>
          <div id="categoriesList">
            <!-- Categories will be dynamically loaded here -->
          </div>

          <button class="ai-plan-btn" id="aiPlanBtn">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path
                d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.10z"
              />
            </svg>
            AI Plan Week
          </button>

          <button class="manage-categories-btn" id="manageCategoriesBtn">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path
                d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
              />
            </svg>
            Manage Categories
          </button>
        </div>
      </aside>

      <!-- Calendar Grid -->
      <main class="calendar-main">
        <div class="calendar-container">
          <div class="calendar-header" id="calendarHeader">
            <!-- Days of week will be inserted here -->
          </div>
          <div class="calendar-grid" id="calendarGrid">
            <!-- Calendar cells will be inserted here -->
          </div>
        </div>
      </main>
    </div>

    <!-- Create/Edit Event Modal -->
    <div class="modal" id="eventModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Create Event</h3>
          <button class="close-btn" id="closeModalBtn">
            <svg viewBox="0 0 24 24" width="24" height="24">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>
        <form id="eventForm">
          <div class="form-group">
            <label for="eventTitle">Event Title</label>
            <input
              type="text"
              id="eventTitle"
              required
              placeholder="Add title"
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="eventDate">Date</label>
              <input type="date" id="eventDate" required />
            </div>
            <div class="form-group">
              <label for="eventStartTime">Start Time</label>
              <input type="time" id="eventStartTime" required />
            </div>
            <div class="form-group">
              <label for="eventEndTime">End Time</label>
              <input type="time" id="eventEndTime" required />
            </div>
          </div>

          <div class="form-group">
            <label for="eventDescription">Description</label>
            <textarea
              id="eventDescription"
              rows="3"
              placeholder="Add description"
            ></textarea>
          </div>

          <div class="form-group">
            <label for="eventCategory">Category</label>
            <select id="eventCategory" required class="category-select">
              <!-- Categories will be loaded dynamically -->
            </select>
          </div>

          <div class="modal-actions">
            <button
              type="button"
              class="btn-delete"
              id="deleteEventBtn"
              style="display: none"
            >
              Delete
            </button>
            <div class="modal-actions-right">
              <button type="button" class="btn-cancel" id="cancelBtn">
                Cancel
              </button>
              <button type="submit" class="btn-save" id="saveEventBtn">
                Save
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- AI Planner Modal -->
    <div class="modal" id="aiPlannerModal">
      <div class="modal-content ai-planner-modal-content">
        <div class="modal-header">
          <h3>ðŸ¤– AI Task Planner</h3>
          <button class="close-btn" id="closeAiPlannerBtn">
            <svg viewBox="0 0 24 24" width="24" height="24">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>

        <div class="ai-planner-content">
          <p class="ai-planner-intro">
            Let AI optimize your schedule based on your tasks and deadlines
          </p>

          <div class="date-range-section">
            <div class="form-group">
              <label for="planStartDate">Plan From</label>
              <input type="date" id="planStartDate" required />
            </div>
            <div class="form-group">
              <label for="planEndDate">To</label>
              <input type="date" id="planEndDate" required />
            </div>
          </div>

          <div class="tasks-section">
            <div class="tasks-header">
              <h4>Your Tasks</h4>
              <button class="add-task-btn" id="addTaskBtn">
                <svg viewBox="0 0 24 24" width="18" height="18">
                  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                </svg>
                Add Task
              </button>
            </div>

            <div id="tasksListPlanner">
              <p class="empty-tasks">
                No tasks added yet. Click "Add Task" to begin.
              </p>
            </div>
          </div>

          <div class="ai-actions">
            <button class="btn-cancel" id="cancelAiPlanBtn">Cancel</button>
            <button class="btn-generate" id="generateScheduleBtn">
              <svg viewBox="0 0 24 24" width="18" height="18">
                <path
                  d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"
                />
              </svg>
              Generate Schedule
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Task Modal -->
    <div class="modal" id="addTaskModal">
      <div class="modal-content add-task-modal-content">
        <div class="modal-header">
          <h3>Add Task</h3>
          <button class="close-btn" id="closeAddTaskBtn">
            <svg viewBox="0 0 24 24" width="24" height="24">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>

        <form id="addTaskForm">
          <div class="form-group">
            <label for="taskName">Task Name *</label>
            <input
              type="text"
              id="taskName"
              placeholder="e.g., Project XYZ, Movie Outing"
              required
              maxlength="50"
            />
          </div>

          <div class="form-group">
            <label for="taskDuration">Duration (hours) *</label>
            <input
              type="number"
              id="taskDuration"
              min="0.5"
              max="24"
              step="0.5"
              placeholder="e.g., 2"
              required
            />
          </div>

          <div class="form-group">
            <label for="taskDeadline">Deadline *</label>
            <input type="date" id="taskDeadline" required />
          </div>

          <div class="form-group">
            <label>Task Type *</label>
            <div class="radio-group">
              <label
                ><input type="radio" name="taskType" value="deadline" checked />
                Deadline - Complete by date</label
              >
              <label
                ><input type="radio" name="taskType" value="daily" /> Daily -
                Recurring every day</label
              >
              <label
                ><input type="radio" name="taskType" value="oneday" /> One Day -
                Must be done on that specific day</label
              >
            </div>
          </div>

          <div class="form-group">
            <label>Flexibility *</label>
            <div class="radio-group">
              <label
                ><input
                  type="radio"
                  name="flexibility"
                  value="flexible"
                  checked
                />
                Flexible - Schedule anytime</label
              >
              <label
                ><input type="radio" name="flexibility" value="fixed" /> Fixed -
                I'll set preferred time</label
              >
            </div>
          </div>

          <div class="form-group" id="preferredTimeGroup" style="display: none">
            <label for="preferredTime">Preferred Time</label>
            <input type="time" id="preferredTime" />
          </div>

          <div class="form-group">
            <label for="taskCategory">Category *</label>
            <select id="taskCategory" required>
              <!-- Categories loaded dynamically -->
            </select>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn-cancel" id="cancelTaskBtn">
              Cancel
            </button>
            <button type="submit" class="btn-save">Add Task</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Onboarding Modal -->
    <div class="modal" id="onboardingModal">
      <div class="modal-content onboarding-modal-content">
        <div class="modal-header">
          <h3>Welcome! Let's personalize your calendar</h3>
        </div>

        <div class="onboarding-content">
          <p class="onboarding-intro">
            Answer a few questions to help AI schedule your tasks optimally
          </p>

          <div class="preference-section">
            <h4>When are you most productive?</h4>
            <div class="checkbox-group">
              <label
                ><input
                  type="checkbox"
                  name="productiveHours"
                  value="morning"
                />
                Morning (6 AM - 12 PM)</label
              >
              <label
                ><input
                  type="checkbox"
                  name="productiveHours"
                  value="afternoon"
                />
                Afternoon (12 PM - 6 PM)</label
              >
              <label
                ><input
                  type="checkbox"
                  name="productiveHours"
                  value="evening"
                />
                Evening (6 PM - 12 AM)</label
              >
              <label
                ><input type="checkbox" name="productiveHours" value="night" />
                Night (12 AM - 6 AM)</label
              >
            </div>
          </div>

          <div class="preference-section">
            <h4>When do you prefer NOT to work?</h4>
            <div class="checkbox-group">
              <label
                ><input
                  type="checkbox"
                  name="unproductiveHours"
                  value="morning"
                />
                Morning (6 AM - 12 PM)</label
              >
              <label
                ><input
                  type="checkbox"
                  name="unproductiveHours"
                  value="afternoon"
                />
                Afternoon (12 PM - 6 PM)</label
              >
              <label
                ><input
                  type="checkbox"
                  name="unproductiveHours"
                  value="evening"
                />
                Evening (6 PM - 12 AM)</label
              >
              <label
                ><input
                  type="checkbox"
                  name="unproductiveHours"
                  value="night"
                />
                Night (12 AM - 6 AM)</label
              >
            </div>
          </div>

          <div class="preference-section">
            <h4>How long can you focus in one session?</h4>
            <div class="radio-group">
              <label
                ><input type="radio" name="sessionLength" value="30" /> 30
                minutes</label
              >
              <label
                ><input type="radio" name="sessionLength" value="60" /> 1
                hour</label
              >
              <label
                ><input type="radio" name="sessionLength" value="120" checked />
                2 hours</label
              >
              <label
                ><input type="radio" name="sessionLength" value="180" /> 3
                hours</label
              >
              <label
                ><input type="radio" name="sessionLength" value="240" /> 4+
                hours</label
              >
            </div>
          </div>

          <div class="preference-section">
            <h4>Preferred break length?</h4>
            <div class="radio-group">
              <label
                ><input type="radio" name="breakLength" value="5" /> 5
                minutes</label
              >
              <label
                ><input type="radio" name="breakLength" value="10" /> 10
                minutes</label
              >
              <label
                ><input type="radio" name="breakLength" value="15" checked /> 15
                minutes</label
              >
              <label
                ><input type="radio" name="breakLength" value="30" /> 30
                minutes</label
              >
            </div>
          </div>

          <div class="onboarding-actions">
            <button class="btn-skip" id="skipOnboardingBtn">
              Skip for now
            </button>
            <button class="btn-save" id="savePreferencesBtn">
              Save Preferences
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
      <div class="modal-content settings-modal-content">
        <div class="modal-header">
          <h3>Settings</h3>
          <button class="close-btn" id="closeSettingsBtn">
            <svg viewBox="0 0 24 24" width="24" height="24">
              <path
                d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              />
            </svg>
          </button>
        </div>

        <div class="settings-content">
          <h4>Event Categories</h4>
          <p class="settings-description">
            Manage your event categories and colors
          </p>

          <div class="categories-list-settings" id="categoriesListSettings">
            <!-- Categories will be loaded here -->
          </div>

          <div class="add-category-section">
            <button class="add-category-btn" id="addCategoryBtn">
              <svg viewBox="0 0 24 24" width="18" height="18">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
              </svg>
              Add New Category
            </button>

            <div
              class="add-category-form"
              id="addCategoryForm"
              style="display: none"
            >
              <div class="form-group">
                <label for="newCategoryName">Category Name</label>
                <input
                  type="text"
                  id="newCategoryName"
                  placeholder="e.g., Study, Travel"
                  maxlength="50"
                />
              </div>
              <div class="form-group">
                <label for="newCategoryColor">Color</label>
                <input type="color" id="newCategoryColor" value="#1a73e8" />
              </div>
              <div class="form-actions">
                <button class="btn-cancel" id="cancelAddCategory">
                  Cancel
                </button>
                <button class="btn-save" id="saveNewCategory">Create</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="calendar.js"></script>
    <script type="module" src="events.js"></script>
    <script type="module" src="holidays.js"></script>
    <script type="module" src="categories.js"></script>
    <script type="module" src="onboarding.js"></script>
    <script type="module" src="ai-planner.js"></script>
  </body>
</html>
